<!doctype html>
<html>
  <style type="text/css">
      body { font-family: arial; }
      thead tr td { font-weight: bold; }
      tr.success { background-color:#CCFFCC; }
      tr.fail { background-color:#FF3333; }
  </style>
    
  <script src="js/common.js"></script>
  <script src="js/benchmark.data.js"></script>
  <script src="js/transformer_fte.js"></script>
  <script src="js/transformer.js"></script>
      
    <script>
        function writeTable() {
            for (var i = 0; i < testResults.length; i++) {
              var retval  = '';
              retval += '<tr id="row'+i+'">';
              retval += '<td class="testNum">'+(i+1)+'</td>';
              retval += '<td class="testInputLanguage">('+testResults[i]['inputLanguage']+', '+testResults[i]['inputMaxLen']+')</td>';
              retval += '<td class="testInputLaguage">('+testResults[i]['outputLanguage']+', '+testResults[i]['outputMaxLen']+')</td>';
              retval += '<td class="testCost">';
              retval += '-';
              retval += '</td>';
              retval += '</tr>';
              
              document.getElementById('benchmarkResults').innerHTML += retval;
            }
        }
        function fillTable(i) {
  
              retval = doBenchmark(testResults[i]['inputLanguage'], testResults[i]['inputMaxLen'],
                                   testResults[i]['outputLanguage'], testResults[i]['outputMaxLen'],
                                   testResults[i]['key'], testResults[i]['plaintext']);
              var success = retval[0];
              var elapsed = retval[1];
            
              var rowClass = 'fail';  
              if (success) {
                  rowClass = 'success';
              }
              

                 var toUpdate = document.getElementById('row'+i).className = rowClass;
                 var toUpdate = document.getElementById('row'+i).getElementsByClassName('testCost')[0];
                 toUpdate.innerHTML = elapsed;
             
        }
        window.onload = function(){ 
          writeTable();
          for (var i = 0; i < testResults.length; i++) {
            //(function(i) {
            //    setTimeout(function() {
              fillTable(i);
            //},100)})(i);
          }
        };
    </script>
  
  <body>
    <table border="1" cellspacing="5">
      <thead>
      <tr>
          <td class="testNum">Test #</td>
          <td class="testInputLanguage">Input Language</td>
          <td class="testOutputLanguage">Output Language</td>
          <td class="testCost">Avg. Encrypt Cost (ms)</td>
      </tr>
    </thead>
    <tbody id="benchmarkResults"></tbody>
    </table>
      
  </body>
  
</html>

